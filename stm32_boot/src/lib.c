/**
 ******************************************************************************
 * @file       lib.c
 * @version    V0.0.1
 * @brief      API C source file of Test.
 * @details    This file including all API functions's implement of lib.
 * @copy       Copyrigth(C), 2012-2015.
 *
 ******************************************************************************
 */
/*-----------------------------------------------------------------------------
Section: Includes 
-----------------------------------------------------------------------------*/
#include <lib.h>

IMPORT void putchar(const uint8 c); 
 
/*-----------------------------------------------------------------------------
Section: Macro Definitions 
-----------------------------------------------------------------------------*/
/* NONE */ 
 
/*-----------------------------------------------------------------------------
Section: Private Type Definitions 
-----------------------------------------------------------------------------*/
/* NONE */ 
 
/*-----------------------------------------------------------------------------
Section: Global Variables 
-----------------------------------------------------------------------------*/
/* NONE */ 
 
/*-----------------------------------------------------------------------------
Section: Private Variables 
-----------------------------------------------------------------------------*/
/* NONE */ 
 
/*-----------------------------------------------------------------------------
Section: Private Function Prototypes 
-----------------------------------------------------------------------------*/
/* NONE */ 
/*-----------------------------------------------------------------------------
Section: Public Function  
-----------------------------------------------------------------------------*/
/**
 ******************************************************************************
 * @brief      printf
 * @param[in]  str: 以'\0'结尾
 * @param[out] None
 * @retval     true-成功、false-失败
 *
 * @details    往串口发送一个字符串
 *
 * @note
 ******************************************************************************
 */
void
print(const int8 *str)
{
    while('\0' != *str)
    {
	    putchar((const uint8)*str++);
   	}
}

#if 0
/**
 ******************************************************************************
 * @brief      delay
 * @param[in]  time: 延时时间
 * @param[out] None
 * @retval     None
 *
 * @details    延时函数
 *
 * @note
 ******************************************************************************
 */
void
delay(uint32 t) {
    while (t-- != 0) {
    }
}

/**
 ******************************************************************************
 * @brief      hex2str
 * @param[in]  const uint8 *hex: 16进制数据
 * @param[in]  uint32 size: 16进制数据长度
 * @param[out] uint8 *str: 字符串
 * @retval     None
 *
 * @details    将16进制数据转换成字符串
 *
 * @note
 ******************************************************************************
 */
void
hex2str(
        const uint8 *hex,
        uint32 size,
		uint8 *str)
{
    uint32 i;
    for (i = 0; i < size; i++) {
        str[i * 2] = (hex[i] >> 4) + '0';
        str[i * 2 + 1] = (hex[i] & 0xF) + '0';
    }
    for (i = 0; i < size * 2; i++) {
        if (str[i] > '9') {
            str[i] += 7;
        }
    }
    str[i] = 0;
}

/**
 ******************************************************************************
 * @brief      hex2str
 * @param[in]  const uint32 num: 数值
 * @param[in]  uint8 *str      : 字符串
 * @param[out] None
 * @retval     uint8: 字符串长度
 *
 * @details    将数值转换成bcd字符串
 *
 * @note
 ******************************************************************************
 */
uint8
int2str(const uint32 num,
        uint8 *str)
{
    uint8 len, i;
    uint32 n;

    n = num;
    for (i = 0; i < 10; i++)
    {
        n = n / 10;
        if (n == 0)
        {
            i++;
            break;
        }
    }
    len = i;
    n = num;
    i--;
    do
    {
        str[i] = n % 10 + '0';
        n = n / 10;
        i--;
    } while (i >= 0);
    str[len] = '\0';
    
    return (len);
}
#endif
/*------------------------------End of lib.c---------------------------------*/ 
